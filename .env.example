# Rake V1 - Environment Configuration Template
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control

# ============================================================================
# APPLICATION
# ============================================================================
VERSION=1.0.0
ENVIRONMENT=development  # development | staging | production
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL

# ============================================================================
# SERVICE
# ============================================================================
RAKE_HOST=0.0.0.0
RAKE_PORT=8002
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ============================================================================
# DATABASE
# ============================================================================
# PostgreSQL connection string (use asyncpg driver for async support)
DATABASE_URL=postgresql+asyncpg://forge_user:your_password@localhost:5432/forge
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ============================================================================
# DATAFORGE SERVICE
# ============================================================================
DATAFORGE_BASE_URL=http://localhost:8001
DATAFORGE_TIMEOUT=30

# ============================================================================
# OPENAI
# ============================================================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_MAX_TOKENS=8191
OPENAI_BATCH_SIZE=100

# ============================================================================
# ANTHROPIC (Optional - for future use)
# ============================================================================
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...

# ============================================================================
# PIPELINE CONFIGURATION
# ============================================================================
MAX_WORKERS=4  # Max concurrent pipeline workers
RETRY_ATTEMPTS=3  # Number of retry attempts for failed operations
RETRY_DELAY=1.0  # Base delay between retries (seconds)
RETRY_BACKOFF=2.0  # Exponential backoff multiplier

# ============================================================================
# CHUNKING CONFIGURATION
# ============================================================================
CHUNK_SIZE=500  # Default chunk size in tokens
CHUNK_OVERLAP=50  # Token overlap between chunks (must be < CHUNK_SIZE)

# ============================================================================
# SCHEDULER
# ============================================================================
SCHEDULER_ENABLED=false  # Enable scheduled jobs
SCHEDULER_INTERVAL=3600  # Default job interval in seconds (3600 = 1 hour)

# ============================================================================
# DEVELOPMENT NOTES
# ============================================================================
#
# Quick Start:
# 1. Copy this file to .env: cp .env.example .env
# 2. Update DATABASE_URL with your PostgreSQL credentials
# 3. Add your OPENAI_API_KEY
# 4. Adjust other settings as needed
#
# Database Setup:
# 1. Create PostgreSQL database: createdb forge
# 2. Run migrations: alembic upgrade head
#
# Running the Service:
# Development: python main.py
# Production: uvicorn main:app --host 0.0.0.0 --port 8002 --workers 4
#
# Testing:
# All tests: pytest
# With coverage: pytest --cov=. --cov-report=html
# Specific test: pytest tests/unit/test_fetch.py -v
#
# ============================================================================
